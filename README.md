<h1 align="center">Скрипт-ёфикатор <a href="https://github.com/zapeko/YoRZ">YoRZ</a></h1>

Для расстановки буквы "ё" (ёфикации) в русском тексте. Итоговый результат сохраняется в html-файле с подсвеченными соответствующим цветом изменёнными участками текста (для визуальной проверки). Текст обрабатывается по четырём словарям в следующей последовательности:

1. (синий, автоматически) | <code>blue.dic</code> - словарь регулярных выражений без буквы "ё"
2. (зелёный, автоматически) | <code>green.dic</code> - словарь регулярных выражений с буквой "ё"
3. (оранжевый, выбор варианта) | <code>orange.dic</code> - словарь со словами разного значения (омографами)
4. (жёлтый, автоматически) | <code>yellow.dic</code> - корневой словарь (основной)

**Логика**:
- фрагменты текста обработанные по словарю <code>blue.dic</code> исключаются из проверки и обработки словарём <code>green.dic</code>.
- фрагменты текста обработанные по словарям <code>blue.dic</code> и <code>green.dic</code> исключаются из проверки и обработки по словарю <code>orange.dic</code>.
- обработка по словарю <code>yellow.dic</code> производится по всему тексту, включая фрагменты ранее изменённые другими словарями.
## Руководство
Для достижения наилучшего результата настоятельно рекомендуется выполнить следующие шаги:
### Шаг 1. Извлечение
Исходный текст поместить в файл <code>book.txt</code> (или переименовать файл с текстом в <code>book.txt</code>) и запустить выполнение скрипта <code>extraction.py</code>
```python
python extraction.py
```
После обработки создаётся файл <code>book_extraction.txt</code> со словами, которые соответствуют определённым параметрам и которых ещё нет в базе <code>yellow_base.txt</code>. Проверьте слова и расставьте букву "ё", где требуется. Слова помеченные <code>(!)</code> требуют особого внимания, так как в базе есть аналоги этих слов с буквой "**ё**" вместо "**е**" или с буквой "**е**" вместо "**ё**". В таких случаях, если слово неверное в таком написании, то его удалить. Если верное и имеет другой смысл, то оставить удалив пометку <code>(!)</code>. После проверки скопировать все слова и добавить в базу <code>yellow_base.txt</code>.
### Шаг 2. Сортировка
Запустить выполнение скрипта <code>sorting.py</code>
```python
python sorting.py
```
Косметика :) Сортирует слова и удаляет дубликаты в файле <code>yellow_base.txt</code>.
После обработки создаётся файл <code>yellow_base_sorting.txt</code>, который нужно сохранить как <code>yellow_base.txt</code>, перезаписав уже имеющийся, но не отсортированный.
### Шаг 3. Поиск двойников (омографов)
Запустить выполнение скрипта <code>twin.py</code>
```python
python twin.py
```
После обработки создаётся файл <code>twin.txt</code> с парами, которых ещё нет в словаре <code>orange.dic</code>. Проверить (если что-то нашлось) и добавить запись в словарь <code>orange.dic</code>.
ВАЖНО! Слова-омографы из базы не удалять. Они также должны находиться в базе <code>yellow_base.txt</code> отдельными словами (не в паре через разделитель <code>|</code>).
### Шаг 4. Формирование словаря yellow.dic
Запустить выполнение скрипта <code>yellow_dic_forming.py</code>
```python
python yellow_dic_forming.py
```
После обработки формируется обновлённый (перезаписывается старый) словарь <code>yellow.dic</code> из следующих файлов:
- <code>yellow_root.txt</code> - список корней
- <code>yellow_base.txt</code> - база слов и словоформ
- <code>yellow_add.txt</code> - дополнения
### Шаг 5. Ёфикация
Запустить выполнение скрипта <code>YoRZ.py</code>
```python
python YoRZ.py
```
После обработки текста создаётся файл <code>book_yo.html</code>, который после визуальной проверки правильности расстановки буквы "ё", можете сконвертировать любым понравившимся конвертером в файл .txt (рекомендую AVS Document Converter).
## Общие требования:
- Все файлы должны находиться в одной папке.
- Кодировка исходного текста: UTF-8 (для преобразования текста с кодировкой <code>cp1251</code> в <code>utf-8</code> можно воспользоваться скриптом <code>typographer.py</code>, хоть его основная задача удаление лишних пробелов, замена тире на длинное тире, замена одинарных многоточий на троеточие, и многое другое).
```python
python typographer.py book.txt
```
После обработки текста создаётся файл <code>book_fixed.txt</code> (проверить и пересохранить в <code>book.txt</code>).
Справка:
```python
python typographer.py --help
```
- Python: 3.6+ (тестировалось на версии 3.10).
- Установленный модуль <code>colorama</code> (чтобы в терминале подсвечивалось слово для которого предлагаются варианты для замены).
```терминал windows
pip install colorama
```
Работоспособность скрипта <code>YoRZ.py</code> и других инструментов тестировалась на:
- Windows 11
- Intel i7-7700k
- 16 gb ОЗУ
